<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.1.4. GCC ToolChain &mdash; Processor SDK Linux for J784s4 Documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" /><link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="1.2. Building the SDK with Yocto" href="../Overview_Building_the_SDK.html" />
    <link rel="prev" title="1.1.3. Create SD Card" href="Processor_SDK_Linux_create_SD_card.html" /> 
  <script src="https://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>
   

</head>

<body class="wy-body-for-nav">
  <!---- extra body elements for TI beyond RTD Sphinx Theme --->
<div class="DocSite-globalNav tiNav">
    <ul>
    </ul>
</div>

<a class="DocSite-nav" href="https://www.ti.com" style="padding-bottom: 85px;">
  <img class="DocSiteNav-logo"
    src="../../_static/img/ti_logo.png"
    alt="TI Logo">
  <div class="DocSiteNav-title"></div>
</a>
   

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../devices/J7_Family/linux/index.html" class="icon icon-home"> Processor SDK Linux for J784s4
          </a>
              <div class="version">
                09_02_00
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../Overview.html">1. Overview</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../Overview_Getting_Started_Guide.html">1.1. Getting Started Guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Download_and_Install_the_SDK.html">1.1.1. Download and Install the SDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="Run_Setup_Scripts.html">1.1.2. Run Setup Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="Processor_SDK_Linux_create_SD_card.html">1.1.3. Create SD Card</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">1.1.4. GCC ToolChain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#yocto-built-sdk-toolchains">1.1.4.1. Yocto-built SDK Toolchains</a></li>
<li class="toctree-l4"><a class="reference internal" href="#arm-toolchains">1.1.4.2. ARM toolchains</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Overview_Building_the_SDK.html">1.2. Building the SDK with Yocto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Overview_Top_Level_Makefile.html">1.3. Simplified SDK Build Using Top-Level Makefile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Overview_Directory_Structure_Overview.html">1.4. Directory Structure Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Overview_PSDKLA_PSDKRA_Summary.html">1.5. Processor SDK RTOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Overview_Technical_Support.html">1.6. Processor SDK Technical Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Overview_GPLv3_Disclaimer.html">1.7. GPLv3 Disclaimer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../devices/J7_Family/linux/Release_Specific.html">2. Release Specific</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Foundational_Components.html">3. Foundational Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../How_to_Guides.html">4. How to Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Documentation_Tarball.html">5. Documentation Tarball</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../devices/J7_Family/linux/index.html">Processor SDK Linux for J784s4</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../devices/J7_Family/linux/index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../Overview.html"><span class="section-number">1. </span>Overview</a> &raquo;</li>
          <li><a href="../Overview_Getting_Started_Guide.html"><span class="section-number">1.1. </span>Getting Started Guide</a> &raquo;</li>
      <li><span class="section-number">1.1.4. </span>GCC ToolChain</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="gcc-toolchain">
<span id="toolchains"></span><h1><span class="section-number">1.1.4. </span>GCC ToolChain<a class="headerlink" href="#gcc-toolchain" title="Permalink to this headline">¶</a></h1>
<div class="section" id="yocto-built-sdk-toolchains">
<span id="yocto-toolchain"></span><h2><span class="section-number">1.1.4.1. </span>Yocto-built SDK Toolchains<a class="headerlink" href="#yocto-built-sdk-toolchains" title="Permalink to this headline">¶</a></h2>
<p>The Processor SDK Linux J784s4 package contains cross compile toolchains for the ARMv8
(<a class="reference internal" href="#linux-devkit"><span class="std std-ref">linux-devkit</span></a>) and ARMv7 (<a class="reference internal" href="#k3r5-devkit"><span class="std std-ref">k3r5-devkit</span></a>) architectures. These toolchains
are used by the <a class="reference internal" href="../Overview_Top_Level_Makefile.html#top-level-makefile"><span class="std std-ref">top level makefile</span></a> when
compiling the binaries for the target. These also package an environment setup
script that, when sourced, sets all the right variables to compile binaries for
the target architecture. The toolchains installers are built through the yocto
build system, same as the target filesystem images themselves.</p>
<p class="rubric">SDK Toolchain Setup</p>
<p>Below variables need to be setup to be able to compile with the toolchains packaged in the SDK.
These will be referenced by the build commands of the Foundational Components in this document.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">host# CROSS_COMPILE_64=&quot;${SDK_INSTALL_DIR}/linux-devkit/sysroots/x86_64-arago-linux/usr/bin/aarch64-oe-linux/aarch64-oe-linux-&quot;</span>
<span class="go">host# SYSROOT_64=&quot;${SDK_INSTALL_DIR}/linux-devkit/sysroots/aarch64-oe-linux&quot;</span>
<span class="go">host# CC_64=&quot;${CROSS_COMPILE_64}gcc --sysroot=${SYSROOT_64}&quot;</span>
<span class="go">host# CROSS_COMPILE_32=&quot;${SDK_INSTALL_DIR}/k3r5-devkit/sysroots/x86_64-arago-linux/usr/bin/arm-oe-eabi/arm-oe-eabi-&quot;</span>
</pre></div>
</div>
<p>Below sections give some more details about the contents of these SDK Toolchains</p>
<div class="section" id="linux-devkit">
<span id="id1"></span><h3><span class="section-number">1.1.4.1.1. </span>linux-devkit<a class="headerlink" href="#linux-devkit" title="Permalink to this headline">¶</a></h3>
<p class="rubric">Overview</p>
<p>The Processor SDK Linux J784s4 package comes with this toolchain preinstalled at linux-devkit/
directory within the SDK. Below paths are relative to the &lt;SDK_INSTALL_DIR&gt; and will be
referred to using the first column in the following sections.</p>
<table class="colwidths-given docutils align-default" id="id3">
<caption><span class="caption-number">Table 1.1 </span><span class="caption-text">Linux Devkit Contents</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 30%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Location</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CROSS_COMPILE_64</p></td>
<td><p>linux-devkit/sysroots/x86_64-arago-linux/usr/bin/aarch64-oe-linux/aarch64-oe-linux-</p></td>
<td><p>Cross compiler toolchain for the ARMv8 architecture</p></td>
</tr>
<tr class="row-odd"><td><p>SYSROOT_64</p></td>
<td><p>linux-devkit/sysroots/aarch64-oe-linux/</p></td>
<td><p>Sysroot with the cross compiled libraries and headers for the ARMv8 architecture with Linux OS</p></td>
</tr>
<tr class="row-even"><td><p>ENV_SETUP_64</p></td>
<td><p>linux-devkit/environment-setup-aarch64-oe-linux</p></td>
<td><p>Shell script that sets environment variables to compile binaries for the ARMv8 linux target</p></td>
</tr>
</tbody>
</table>
<p class="rubric" id="cross-compiled-libraries">Target Sysroot</p>
<p>The toolchain within the Linux SDK contains more than just the
cross-compiler, it also contains pre-built libraries that can be used
in your applications without requiring you to cross-compile them
yourself. These libraries include packages from alsa to zlib.
or a list of the
libraries you can refer to the software manifest found in the <strong>&lt;SDK
INSTALL DIR&gt;/manifest</strong> directory or look at the list of libraries
available in the <strong>&lt;SYSROOT_64&gt;/usr/lib</strong> directory. You will
also find the header files corresponding to these libraries in the
<strong>&lt;SYSROOT_64&gt;/usr/include</strong> directory. As
an example if your application wants access to the alsa asound library
then you can now do the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">host# ${CROSS_COMPILE_64}gcc -lasound app.c -o app.out</span>
</pre></div>
</div>
<p class="rubric" id="environment-setup-script">Environment-setup script</p>
<p>When cross-compiling packages that use configuration tools and autotools
there are many settings that are required to make sure that the proper
cross-compile libraries are used. The <strong>environment-setup</strong> script
located in the <strong>&lt;SDK_INSTALL_DIR&gt;/linux-devkit</strong> directory handles this
for you. This script exports variables to perform actions such as:</p>
<ul class="simple">
<li><p>Adding the toolchain to the PATH</p></li>
<li><p>Setting up CPATH</p></li>
<li><p>Setting up PKG_CONFIG_* paths</p></li>
<li><p>Setting standard variable such as CC, CPP, AR to the cross-compile
values</p></li>
</ul>
<p>To <strong>use</strong> the environment-setup script you only need to source it. This
is as simple as:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">host# source ${ENV_SETUP_64}</span>
</pre></div>
</div>
<div class="admonition note" id="when-compiling-the-linux-kernel">
<p class="admonition-title">Note</p>
<p>Because environment-setup changes standard variables such as CC you
should not use this script when compiler projects that build host-side
as well as target-side tools. A prime example of this is the Linux
kernel, which builds some host side tools to help during the kernel
build. If the environment-setup script has been sourced then the CC
value will specify the cross-compiler for the host-side tool build. This
means that the tools compiled and used during the kernel build will be
compiled for the ARM platform while the kernel build tries to run these
tools on an Intel platform. This will cause the tools to fail to run and
the kernel to fail to compile.</p>
</div>
<p class="rubric" id="usage">Example usage</p>
<p>In the simplest case the cross-compiler can be used to compile simple
applications that just need access to standard libraries. The
example below covers an application that uses only the standard libgcc
libraries.</p>
<ol class="arabic">
<li><p>First, create a <strong>helloworld.c</strong> file</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Hello World from TI!!!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Compile the c file to generate an executable for the target architecture,
using one of the below 2 methods:</p>
<ul>
<li><p><strong>Compile Directly</strong> : Cross-compile the <strong>helloworld.c</strong> file using the
cross-compile toolchain directly</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">host# ${CROSS_COMPILE_64}gcc --sysroot=${SYSROOT_64} helloworld.c -o helloworld</span>
</pre></div>
</div>
<p>Be sure to give the correct path to the gcc cross compiler and target
sysroot as listed earlier.</p>
</li>
<li><p><strong>Using the environement setup script</strong> : Cross-compile after sourcing
the setup script</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">host# source ${ENV_SETUP_64}</span>
<span class="go">host# ${CC} helloworld.c -o helloworld</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>After the above steps are run you should now have a <strong>helloworld</strong>
executable in your directory that has been compiled for the ARM. A
simple way to check this is to run the “file” command. It should
return an output similar to below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">host# file helloworld</span>
<span class="go">helloworld: ELF 64-bit LSB executable, ARM aarch64, version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux-aarch64.so.1, BuildID[sha1]=bb96180ad71bd44e07fc148015a55c844134f30d, for GNU/Linux 3.14.0, with debug_info, not stripped</span>
</pre></div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="k3r5-devkit">
<span id="id2"></span><h3><span class="section-number">1.1.4.1.2. </span>k3r5-devkit<a class="headerlink" href="#k3r5-devkit" title="Permalink to this headline">¶</a></h3>
<p class="rubric">Overview</p>
<p>The Processor SDK Linux J784s4 package comes with an ARMv7 toolchain preinstalled at k3r5-devkit/
directory within the SDK. Below paths are relative to the &lt;SDK_INSTALL_DIR&gt;.</p>
<table class="colwidths-given docutils align-default" id="id4">
<caption><span class="caption-number">Table 1.2 </span><span class="caption-text">k3r5 Devkit Contents</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 30%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Location</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CROSS_COMPILE_32</p></td>
<td><p>k3r5-devkit/sysroots/x86_64-arago-linux/usr/bin/arm-oe-eabi/arm-oe-eabi-</p></td>
<td><p>Cross compiler toolchain for the ARMv7 architecture</p></td>
</tr>
<tr class="row-odd"><td><p>SYSROOT_32</p></td>
<td><p>k3r5-devkit/sysroots/armv7at2hf-vfp-oe-eabi/</p></td>
<td><p>Sysroot with the cross compiled libraries and headers for the ARMv7 architecture</p></td>
</tr>
<tr class="row-even"><td><p>ENV_SETUP_32</p></td>
<td><p>k3r5-devkit/environment-setup-armv7at2hf-vfp-oe-eabi</p></td>
<td><p>Shell script that sets environment variables to compile binaries for the target</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="arm-toolchains">
<span id="external-arm-toolchain"></span><h2><span class="section-number">1.1.4.2. </span>ARM toolchains<a class="headerlink" href="#arm-toolchains" title="Permalink to this headline">¶</a></h2>
<p>It is strongly recommended to use the toolchain in the Processor SDK which
is the version tested for TI platforms. In case the Processor SDK is not
used, the toolchain can be downloaded and the toolchain path can be set as
follows.</p>
<p class="rubric">Arm Toolchain setup</p>
<p>Download the toolchain from <a class="reference external" href="https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads">here</a>,
and the version can be found in the <a class="reference internal" href="../../devices/J7_Family/linux/Release_Specific_Release_Notes.html#u-boot-release-notes"><span class="std std-ref">release notes</span></a>.
The following example shows how to download and set toolchain paths
into a <code class="docutils literal notranslate"><span class="pre">&lt;COMPILER_PATH&gt;</span></code> directory in Linux Host using x86_64 architecture.
The environment variables defined here will be referenced in the build
commands of the Foundational Components in this document.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">host# COMPILER_PATH=/opt/arm-toolchain</span>
<span class="go">host# mkdir -p $COMPILER_PATH</span>
<span class="go">host# wget -c https://developer.arm.com/-/media/Files/downloads/gnu/11.3.rel1/binrel/arm-gnu-toolchain-11.3.rel1-x86_64-arm-none-linux-gnueabihf.tar.xz -O - | tar -xv -J -C $COMPILER_PATH</span>
<span class="go">host# wget -c https://developer.arm.com/-/media/Files/downloads/gnu/11.3.rel1/binrel/arm-gnu-toolchain-11.3.rel1-x86_64-aarch64-none-linux-gnu.tar.xz -O - | tar -xv -J -C $COMPILER_PATH</span>
<span class="go">host# CROSS_COMPILE_64=$COMPILER_PATH/arm-gnu-toolchain-11.3.rel1-x86_64-aarch64-none-linux-gnu/bin/aarch64-none-linux-gnu-</span>
<span class="go">host# CROSS_COMPILE_32=$COMPILER_PATH/arm-gnu-toolchain-11.3.rel1-x86_64-arm-none-linux-gnueabihf/bin/arm-none-linux-gnueabihf-</span>
<span class="go">host# CC_64=&quot;${CROSS_COMPILE_64}gcc&quot;</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Processor_SDK_Linux_create_SD_card.html" class="btn btn-neutral float-left" title="1.1.3. Create SD Card" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../Overview_Building_the_SDK.html" class="btn btn-neutral float-right" title="1.2. Building the SDK with Yocto" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <a href="https://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2023</a>, Texas Instruments Incorporated. All rights reserved. <br/>
      <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>